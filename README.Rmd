---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

# datenguideR <img src='man/figures/logo.png' align="right" height="139" />


```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)


```


<!-- badges: start -->
[![Lifecycle:
experimental](https://img.shields.io/badge/lifecycle-maturing-blue.svg)](https://www.tidyverse.org/lifecycle/#maturing)
[![Build_Status](https://travis-ci.org/CorrelAid/datenguideR.svg?branch=master)](https://travis-ci.org/CorrelAid/datenguideR)
[![CRAN_Status_Badge](http://www.r-pkg.org/badges/version/datenguideR)](https://cran.r-project.org/package=datenguideR)
[![Codecov test coverage](https://codecov.io/gh/CorrelAid/datenguideR/branch/master/graph/badge.svg)](https://codecov.io/gh/CorrelAid/datenguideR?branch=master)
<!-- badges: end -->


## Usage

First, install package from GitHub:

```{r, eval=F}
devtools::install_github("CorrelAid/datenguideR")
```

Load package:

```{r}
library(datenguideR)
```

## Examples

Get IDs of all available NUTS-1 regions:


```{r}
datenguideR::dg_regions %>%
  dplyr::filter(level == "nuts1") %>%
  knitr::kable()
```

Get all available meta data on statistics, substatistics, and parameters:

```{r}
datenguideR::dg_descriptions
```

Pick a statistic and put it into `dg_call()` (infos can be retrieved from `dg_descriptions`).


For example:

 - **Statistic** AI0506 *(Wahlbeteiligung, Bundestagswahl)*

```{r}
dg_call(region_id = "11",
        year = 2002,
        stat_name = 'AI0506')
```

A slightly more complex call with substatistics:

  - **Statistic:** BETR08 *(Landwirtschaftliche Betriebe mit Tierhaltung)*
  - **Substatistic:** TIERA8 *(Landwirtschaftliche Betriebe mit Viehhaltung)*
  - **Parameter:** 
    - TIERART2 *(Rinder)*
    - TIERART3 *(Schweine)*
    
    
```{r}

dg_call(region_id = "11", 
        year = c(2001, 2003, 2007), 
        stat_name = 'BETR08', 
        substat_name = 'TIERA8', 
        parameter = c("TIERART2", "TIERART3")) 

```

If you give no parameters for a substat, it will default to return results for all of them.

```{r}
dg_call(region_id = "11", 
        year = c(2001, 2003, 2007), 
        stat_name = 'BETR08', 
        substat_name = 'TIERA8') 
```




### AllRegions

Just leave `region_id` blank and provide either a `nuts_nr` or `lau_nr` to get data for multiple regions at once.

```{r}

dg_call(nuts_nr = 1,
        year = c(2001, 2003, 2007), 
        stat_name = 'BETR08', 
        substat_name = 'TIERA8') 


```



```{r}

dg_call(nuts_nr = 1,
        stat_name =  "BAU018",
        substat_name = "BAUAHZ",
        year = 2016)

```


```{r}
dg_call(nuts_nr = 2, stat_name = "GEBWOR", substat_name = "BAUAT2")
```

